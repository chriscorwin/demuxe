<%

	const targetDemoName = locals.sanitizedQueryParams.demoName;
	const demo = locals.availableDemoConfigs.find((demo) => demo.demoName === targetDemoName);
	console.log('demo.demoFlow', demo.demoFlow);

%>
	<div class="header">
		<img src="<%= demo.thumbnail %>" alt="">
		<div class="title"><%= demo.demoName %>
			<div class="slds-text-heading_large"><%= demo.description %></div>
		</div>
		<a href="<%= demo.production.host %>" class="slds-button">View Demo</a>
	</div>

	<div class="row">
		<%
			const screenshotFilenamePrefix = `${demo.productTemplate}.${demo.demoVenue}.${demo.brandTheme}`;
			demo.demoFlow.steps.forEach((step) => {
				let actionTaken = '';

				if (typeof step.goto !== "undefined") {
					actionTaken = `Went to ${step.goto}`;
				}

				if (typeof step.click !== "undefined") {
					actionTaken = `Clicked ${step.click}`;
				}

				if (typeof step.hover !== "undefined") {
					actionTaken = `Hovered ${step.hover}`;
				}

				if (typeof step.evaluate !== "undefined") {
					actionTaken = `Executed JS: <code>${step.evaluate}</code>`;
				}

				if (typeof step.drag !== "undefined") {
					actionTaken = `Dragged ${step.drag}`;
				}

				echo(`
					<div class="column">
						<div class="content">
							<a class="thumbnail" href="screenshots/${screenshotFilenamePrefix}.${step.name}.slide.png">
								<img src="screenshots/${screenshotFilenamePrefix}.${step.name}.slide.png" alt="">
							</a>
							<h4>${actionTaken}</h4>
						</div>
					</div>
				`);
			});
		%>
	</div>
